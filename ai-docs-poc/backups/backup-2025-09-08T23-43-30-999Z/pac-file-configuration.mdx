---
slug: trend-vision-one-pac-file-configuration
title: PAC file configuration
last_updated: '2025-09-08'
ai_context:
  source_file: pac-file-configuration.md
  conversion_date: '2025-09-08T23:42:14.673Z'
conversion_status: converted
translation_ready: true
---

::: {role="main"}
Add domains to your existing PAC files to bypass proxy handling, or add new custom PAC files.

The PAC file proxy-based solution forwards your end-user traffic to the Internet Access Gateway that enforces Internet Access Control rules.

To find out about other traffic forwarding options, see [Traffic forwarding options for Internet Access and AI Service Access](traffic-forwarding-internet-access.mdx).

### Procedure {#procedure}

1.  On the Trend Vision One console, go to **Zero Trust Secure Access → Secure Access Configuration → Internet Access and AI Service Access Configuration**.

2.  On the **PAC Files** tab:

    - Create a new PAC file by clicking **Add**.

    - Edit an existing PAC file by clicking the **Edit** (![](/images/edit_icon=GUID-1F1D1164-5310-4D6D-ACD0-6049C86960AF.webp)) icon in the **Action** column.

3.  Specify a unique **PAC file name** and **Description**.

4.  For customers who want to automatically populate the proxy bypass list for supported apps, enable the following:

    - **Bypass proxy for network requests to Microsoft Office 365**

    - **Bypass proxy for network requests to Google**

    - **Bypass proxy for netwrok requests to Apple** (iOS mobile deployments)

5.  Choose how to edit the PAC file by selecting an **Edit mode**.

    - **Basic mode** adds domains to the file using the user interface and does not affect any other code.

      Supports multi-byte encoded and non-ASCII characters.

    - **Advanced mode** displays the complete contents of the file in an editable field.

      If you have an existing PAC file, copy the code, and paste into the field.

    :::warning[Important]

    When also using Zero Trust Secure Access Private Access, you must include but not modify the following arguments:

    - `isInNet(ip, "100.64.0.0", "255.255.0.0");`

    - `var DNSNeedResolve = true;`

    The arguments ensure that Private Access traffic whose destination IP address falls in the **100.64.0.0** network segment after local DNS resolution is by-passed.

    When using your own PAC file, ensure that you add the Private Access by-pass code. The following example adds the network segment to bypass Private Access traffic forwarding to the Internet Access Gateway.

    ``` codeblock
    if isInNet(dnsResolve(host), "100.64.0.0", "255.255.0.0")
       return 'DIRECT';
    ```
    :::

    If you bypass Microsoft domains, Zero Trust Secure Access automatically adds the following domains to PAC files:

    - windowsupdate.microsoft.com

    - \*.windowsupdate.microsoft.com

    - \*.update.microsoft.com

    - \*.windowsupdate.com

    - download.microsoft.com

    - ntservicepack.microsoft.com

    - officecdn.microsoft.com

    - officecdn.microsoft.com.edgesuite.net

    - \*.prod.do.dsp.mp.microsoft.com

    - \*.delivery.mp.microsoft.com

    - adl.windows.com

    - tsfe.trafficshaping.dsp.mp.microsoft.com

    If you bypass Apple domains, Zero Trust Secure Access automatically adds the following domains to PAC files:

    - \*.apple.com

    - \*.icloud.com

    - \*.itunes.apple.com

    - \*.mzstatic.com

    - \*.push.apple.com

    - \*.cdn-apple.com

    - \*.apps.apple.com

    - \*.appattest.apple.com

    - \*.apps-marketplace.apple.com

    - \*.apple-mapkit.com

    - \*.axm-usercontent-apple.com

    - \*.vertexsmb.com

6.  (Optional) Add additional proxy FQDNs to your PAC file.

    :::note

    Adding additional proxies requires editing the PAC file using advanced mode.
    :::

    1.  Obtain the FQDNs or IP addresses of the proxy servers you want to include in your PAC file.

        Secure Access only allows the use of the following proxy FQDN or IP in PAC files:

        - Internet Access Cloud Gateway proxy

          :::tip

          To see a list of the available cloud Internet Access Gateway proxy servers, go to [Port and FQDN/IP address requirements](port-fqdn-ip-address-requirements.mdx) and select your region.
          :::

        - Internet Access On-Premises Gateway proxy

          :::tip

          Trend Micro recommends using the FQDN of on-premises proxy servers.
          :::

        - Common proxy (Supported on Windows only)

          To redirect specific domains to your proxy server, define a variable with the prefix “NonZT“, assign your proxy to it, and return the variable when matching specific domains.

          Example:

          ``` codeblock
          function FindProxyForURL(url, host) {
              var NonZTProxy = "PROXY 10.0.0.10:8080; DIRECT";
              var InternalHosts = [
                  "mycompany.com",
                  "mycompany2.com"
              ];
              for (var i in InternalHosts) {
                  if (shExpMatch(host, InternalHosts[i])) {
                      return NonZTProxy;
                  }
          ```

          Connections to these specified domains bypass the ZTSA agent and are routed directly through your specified proxy server.

    2.  Locate the return value of the function `FindProxyForURL`.

    3.  Edit the return value of the function.

        The return value must be a string containing one or more of the following elements, separated by a semicolon.

        - `PROXY <FQDN of proxy>:<port>`

        - `DIRECT`

        <figure>
        <p>Example:</p>
        <pre class="codeblock"><code>PROXY proxy1.mydomain.com:8088; PROXY proxy2.mydomain.com:8088; PROXY proxy3.mydomain.com:8088; DIRECT</code></pre>
        </figure>

        :::note

        Use the following port numbers:

        - Cloud Gateway: `80`

        - On-Premises Gateway: `8088`
        :::

    :::note

    If the first proxy server in the list fails, Secure Access connects to the next proxy servers in the list one by one in sequential order.
    :::

7.  Click **Save**.

8.  (Optional) Apply the modified PAC file to the target devices with the Secure Access Module deployed.

    1.  In the **Applied platforms** column, click the **Apply** (![](/images/apply_PAC_file=c95a7e15-901f-4293-aea0-a557e44d3145.webp)) icon.

    2.  Select the operating systems to apply the PAC file to.

        :::note

        Each operating system can only have one applied PAC file.
        :::

    The PAC file replacement takes effect within a few minutes.

    You can also replace the PAC file in the Secure Access Module by individual endpoint or endpoint group in the **Secure Access Module** screen. For more information, see [PAC File replacement](pac-file-replacement.mdx).

    :::note

    For a single endpoint, the PAC file applied by individual endpoint or endpoint group takes effect, regardless of the platform-based PAC file configured for the endpoint.
    :::

**Related information**

- [PAC file configuration guidance](pac-file-configuration-tips.mdx)
:::
