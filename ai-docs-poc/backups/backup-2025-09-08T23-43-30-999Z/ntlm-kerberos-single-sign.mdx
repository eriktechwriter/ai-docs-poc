---
slug: trend-vision-one-ntlm-kerberos-single-sign
title: Preparing your environment for NTLM or Kerberos single sign-on
last_updated: '2025-09-08'
ai_context:
  source_file: ntlm-kerberos-single-sign.md
  conversion_date: '2025-09-08T23:42:14.904Z'
conversion_status: converted
translation_ready: true
---

:::: {role="main"}
Before you configure your NTLM or Kerberos for single sign-on with Active Directory (on-premises), you must first configure the Active Directory server and the client computer.

:::warning[Important]

Make sure you have a Service Gateway configured with the Zero Trust Secure Access On-premises Gateway installed and enabled.
:::

**Related information**

- Configuring the Active Directory server for Kerberos or NTLM single sign-on
- Configuring the client computer for Kerberos or NTLM single sign-on

## Configuring the Active Directory server for Kerberos or NTLM single sign-on {#configuring-the-active-directory-server-for-kerberos-or-ntlm-single-sign-on}

Configure your Active Directory server to prepare for enabling single sign-on authentication services on your Internet Access on-premises gateway.

To configure your Active Directory server for Kerberos or NTLM single sigh-on, you must add a DNS record of the on-premises gateway being used as an authentication proxy.

### Procedure {#procedure}

1.  Get the IP address of the Service Gateway configured with the on-premises gateway service that you want to use as the authentication proxy.

    1.  On the Trend Vision One console, go to **Workflow and Automation → Service Gateway Management**.

    2.  Click the identifier of the Service Gateway you want to use as the authentication proxy.

    3.  From the Service Gateway details screen, copy the IPv4 address.

2.  On your Active Directory server console, go to **Administrative Tools → DNS → Forward Lookup Zones**.

3.  Right-click the name of the Active Directory domain you wish to synchronize with the specified Internet Access on-premises gateway and select **New Host...**,.

4.  In the **New Host** screen that appears, provide a **Name** for the authentication proxy.

    Use a name that is easy to remember, such as `authproxy`.

5.  Type the IPv4 address of the Service Gateway being used as an authentication proxy.

    The FQDN field automatically fills in. Copy the FQDN for a later step.

6.  Click **Add Host**.

7.  Update the Service Gateway FQDN.

    1.  On the Trend Vision One console, go to **Workflow and Automation → Service Gateway Management**.

    2.  Locate the Service Gateway you are using as the authentication proxy.

    3.  Click the **Configure settings** icon (![](/images/configure=GUID-657DB993-ADC7-4DEC-8C62-C8739D74760E.webp)).

        The **Service Gateway Settings** window appears.

    4.  Click the **Edit name** icon (![](/images/Edit=GUID-fbd72244-55f4-4c70-a5b0-e5caf4f0cc8e.webp)).

    5.  Replace the value with the FQDN you copied.

    6.  Click **Change**, then click **Save**.

## Configuring the client computer for Kerberos or NTLM single sign-on {#configuring-the-client-computer-for-kerberos-or-ntlm-single-sign-on}

Configure your client computer to prepare for enabling single sign-on authentication services on your Internet Access on-premises gateway.

### Procedure {#procedure-1}

1.  Configure the DNS server for the client computer.

    1.  Open a web browser on the client computer and go to **Internet Protocol Version 4 (TCP/IPv4)** in the internet settings.

    2.  In the **Preferred DNS server** field, enter the IP address of your Active Directory server.

    3.  Click **OK**.

2.  Disable IPv6 on the client computer.

    1.  In the browser on your client computer, go to **Internet Protocol Version 6 (TCP/IPv6)** in the internet settings.

    2.  Uncheck the box enabling IPv6 use.

    3.  Click **OK**.

3.  Add the client computer to an Active Directory domain.

    1.  Go to **System Properties** and select the **Computer Name** tab.

    2.  Select **Change**.

    3.  On the **Computer Name/Domain Changes** screen that appears, select **Domain** and enter the name of the desired Active Directory domain.

    4.  Click **OK**.

    5.  Confirm the user name and password of the administrator account.

    6.  Restart the client computer and sign in using the Active Directory domain user account credentials.

4.  Ensure the FQDN of the authentication proxy is on the bypass or exceptions list in the client proxy settings.

    - If you are using a PAC file, add the FQDN to the PAC File Settings in Trend Vision One

      1.  On the Trend Vision One console, go to **Zero Trust Secure Access → Secure Access Configuration → Internet Access Configuration → PAC Files**.

      2.  Locate the PAC file the client computer is using and click the edit icon (![](/images/modify_connector=d7163417-a1d8-4a5a-8e4b-a8babe128751.webp)).

      3.  Add the FQDN to the bypass proxy list:

          1.  If you are using a single gateway, bypass `<the single gateway FQDN>`.

          2.  If you are using multiple gateways behind a load balancer, bypass the `<load balancer FQDN>`.

      4.  Click **Save**.

      5.  Deploy the updated PAC file to the client computer.

    - If you are using manual proxy setup on the client computer, add the FQDN to the proxy exception list.

      1.  On the client computer, go to **Start → Settings → Network & Internet → Proxy**.

      2.  Add the FQDN to the list under **Use the proxy server except for addresses that start with the following entries**:

          1.  If you are using a single gateway, add `<the single gateway FQDN>`.

          2.  If you are using multiple gateways behind a load balancer, add the `<load balancer FQDN>`.

      3.  Click **Save**.

5.  On the client computer, allow automatic logon in Intranet zone by adding the FQDN of the authentication proxy to your Intranet based on whether Secure Access Module is installed or by supported browser.

    <table>
    <colgroup>
    <col style="width: 20%" />
    <col style="width: 20%" />
    <col style="width: 60%" />
    </colgroup>
    <thead>
    <tr>
    <th><p>Connection Method</p></th>
    <th><p>Supported Browser</p></th>
    <th><p>Settings</p></th>
    </tr>
    </thead>
    <tbody>
    <tr>
    <td><p>With Secure Access Module installed</p></td>
    <td><p>n/a</p></td>
    <td><ol>
    <li><p>Go to <strong>Control Panel → Network and Internet → Internet Options</strong> and click the <strong>Security</strong> tab.</p></li>
    <li><p>Select <strong>Local intranet</strong> and click <strong>Sites</strong>.</p></li>
    <li><p>In the <strong>Local intranet</strong> screen, click <strong>Advanced</strong>, add the FQDN of the authentication proxy and click <strong>Add</strong>.</p>
    

    :::tip
    
    <p>For a single gateway, use <code>&lt;the single gateway FQDN&gt;</code>.</p>
    <p>For multiple gateways behind a load balancer, use the <code>&lt;load balancer FQDN&gt;</code>.</p>
    

    :::

    </li>
    <li><p>Close the screen.</p></li>
    </ol></td>
    </tr>
    <tr>
    <td rowspan="2"><p>Without Secure Access Module installed (use a supported browser)</p></td>
    <td><p>Mozilla® Firefox®</p></td>
    <td><ol>
    <li><p>Open Firefox, type <code>about:config</code> in the address bar, and then click <strong>I accept the risk!</strong>.</p></li>
    <li><p>For NLTM, type <code>network.automatic</code> in the search box and double-click <strong>network.automatic-ntlm-auth.trusted-uris</strong>.</p></li>
    <li><p>For Kerberos: type <code>network.negotiate-auth</code> in the search box and double-click <strong>network.negotiate-auth.trusted-uris</strong>.</p></li>
    <li><p>Type the FQDN of the authentication proxy and click <strong>OK</strong>.</p>
    

    :::tip
    
    <p>For a single gateway, use <code>&lt;the single gateway FQDN&gt;</code>.</p>
    <p>For multiple gateways behind a load balancer, use the <code>&lt;load balancer FQDN&gt;</code>.</p>
    

    :::

    </li>
    </ol></td>
    </tr>
    <tr>
    <td><p>Google Chrome™</p>
    <p>Microsoft Edge™ (Chromium-based)</p></td>
    <td><ol>
    <li><p>Open <strong>Internet Options</strong> and click the <strong>Security</strong> tab.</p></li>
    <li><p>Select <strong>Local intranet</strong> and click <strong>Sites</strong>.</p></li>
    <li><p>In the <strong>Local intranet</strong> screen, click <strong>Advanced</strong>, add the FQDN of the authentication proxy and click <strong>Add</strong>.</p>
    

    :::tip
    
    <p>For a single gateway, use <code>&lt;the single gateway FQDN&gt;</code>.</p>
    <p>For multiple gateways behind a load balancer, use the <code>&lt;load balancer FQDN&gt;</code>.</p>
    

    :::

    </li>
    <li><p>Close the screen.</p></li>
    </ol></td>
    </tr>
    </tbody>
    </table>
::::
