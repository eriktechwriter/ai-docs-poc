---
slug: trend-vision-one-api-generate-agent-deploy
title: Use the API to generate an agent deployment script
last_updated: '2025-09-08'
ai_context:
  source_file: api-generate-agent-deploy.md
  conversion_date: '2025-09-08T23:42:24.945Z'
conversion_status: converted
translation_ready: true
---

:::: {role="main"}
Use the API to generate deployment scripts to automate the installation of the agent on a computer. For background information about these scripts, see [Use deployment scripts to add and protect computers](deployment-scripts-add-computers.mdx).

:::note

The displayed code is an example of a generated deployment script. Depending on your region, the deployment script you generate might be different.
:::

## General steps {#general-steps}

Use the following general procedure to generate a deployment script:

### Procedure {#procedure}

1.  Create an AgentDeploymentScript object and configure the properties:

    - The only required property is the platform of the target computer.

    - Properties that are used for downloading the agent software are the Server & Workload Protection proxy ID and whether to require the manager to be using a valid certificate for securing the connection.

    - All other properties are useful only if you want the script to activate the agent.Create an AgentDeploymentScript object and configure the properties:

2.  Create an `AgentDeploymentScriptsApi` object and use it with the `AgentDeploymentScript` to send a request to Server & Workload Protection to create the script. The returned object is an `AgentDeploymentScript` that stores the script in the `script_body` (Python) or `scriptBody` (JavaScript and Java) property.

### Next steps {#next-steps}

For more information about the properties and operations, see the [Agent Deployment Scripts](https://automation.trendmicro.com/cloudone/workload-security/) operations in the API Reference.

The following example creates the most basic deployment script where only the platform is specified:

``` codeblock
deployment_script = api.AgentDeploymentScript()
deployment_script.platform = platform
```

Then, the request to create the script is sent to Server & Workload Protection. The returned value contains the script:

``` codeblock
deployment_scripts_api = api.AgentDeploymentScriptsApi(api.ApiClient(configuration))
deployment_script = deployment_scripts_api.generate_agent_deployment_script(api_version, agent_deployment_script = deployment_script)
```

## Example {#example}

The following example shows the configuration of many aspects of a deployment script. Once you generate the agent deployment script, you can save the script to a file on the target computer and run it. Although the following example does not perform those activities, you can adapt it to do so, automating the entire agent deployment process.

[View source](https://github.com/deep-security/automation-center-sdk-samples/blob/master/python/src/automate_deployment_examples.py)

``` codeblock
# Create the AgentDeploymentScript object and configure
deployment_script = api.AgentDeploymentScript()
deployment_script.platform = platform
deployment_script.dsm_proxy_id = dsm_proxy_id
deployment_script.validate_certificate_required = validate_certificate
deployment_script.activation_required = activate
deployment_script.computer_group_id = computer_group_id
deployment_script.policy_id = policy_id
deployment_script.relay_id = relay_id
deployment_script.replay_proxy_id = relay_proxy_id

deployment_scripts_api = api.AgentDeploymentScriptsApi(api.ApiClient(configuration))
deployment_script = deployment_scripts_api.generate_agent_deployment_script(api_version, agent_deployment_script = deployment_script)
return deployment_script.script_body
```

Also see the [Generate Agent Deployment Scripts](https://automation.trendmicro.com/cloudone/workload-security/) operation in the API Reference.
::::
