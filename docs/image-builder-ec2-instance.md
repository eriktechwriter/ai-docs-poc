---
id: image-builder-ec2-instance
title: Set up the image builder and create an Amazon Elastic Compute Cloud (EC2) instance
sidebar_label: Set up the image builder and create an Amazon Elastic Compute Cloud (EC2) instance
description: Set up the image builder and create an Amazon Elastic Compute Cloud (EC2) instance
tags:
  - endpoint-security
  - trend-vision-one
---

/*<![CDATA[*/ $('#title').html($('meta[name=map-description]').attr('content')); /*]]>*/ Set up the image builder and create an Amazon Elastic Compute Cloud (EC2) instance After setting parameter store values, complete the following steps. Procedure Set up an identity access management (IAM) role for an EC2 instance. Create a recipe with a Trend Vision One Endpoint Security agent component. Create the infrastructure configuration. Create an image pipeline. Launch an EC2 from Amazon Machine Image (AMI). Connect an EC2 instance to Trend Vision One. Related information Set up an identity access management (IAM) role for an Amazon Elastic Compute Cloud (EC2) instance Create a recipe with a Trend Vision One Endpoint Security agent component Create an image pipeline Create the infrastructure configuration Launch an Elastic Compute Cloud (EC2) from Amazon Machine Image (AMI) Connect an Amazon Elastic Compute Cloud (EC2) instance to Trend Vision One Set up an identity access management (IAM) role for an Amazon Elastic Compute Cloud (EC2) instance To begin setting up the image builder and creating an Amazon Elastic Compute Cloud (EC2) instance, follow these steps: Procedure Go to IAM → Roles. Create a new role. Select EC2 as the Trusted entity type. Add the following permission policies to the role: AmazonSSMFullAccess AmazonSSMManagedInstanceCore EC2InstanceProfileForImageBuilder Name the role. Finish creating the role. Edit the role to add the following inline policy: { "Version": "2012-10-17", "Statement": [ { "Sid": "VisualEditor0", "Effect": "Allow", "Action": [ "ssm:PutParameter", "ssm:LabelParameterVersion", "ssm:DeleteParameter", "ssm:UnlabelParameterVersion", "ssm:DescribeParameters", "ssm:GetParameterHistory", "ssm:DescribeDocumentParameters", "ssm:GetParametersByPath", "ssm:GetParameters", "ssm:GetParameter", "ssm:DeleteParameters", "s3:get*", "s3:List*", "imagebuilder:GetComponent" ], "Resource": "*" } ] } Next steps Create a recipe with a Trend Vision One Endpoint Security agent component. Create a recipe with a Trend Vision One Endpoint Security agent component After setting up an IAM role for an EC2 instance, continue setting up the image builder and creating an Amazon Elastic Compute Cloud (EC2) instance by following these steps: Procedure In EC2 Image Builder, go to Images recipes. Create an image recipe. Retrieve the Trend Vision One Endpoint Security agent component corresponding to Linux or Windows from AWS Marketplace images. Select a managed instance from AWS with one of the supported versions of the following operating systems: Linux Windows Amazon Linux 2 Microsoft Windows Server 2019 Amazon Linux 2023 Microsoft Windows Server 20H2 Ubuntu 20 Microsoft Windows Server 2022 Ubuntu 22 Microsoft Windows Server 2025 Ubuntu 24.04 CentOS Linux 8 CentOS Stream 8 Red Hat Enterprise Linux 8 Red Hat Enterprise Linux 9 SUSE Linux Enterprise Server 12 SUSE Linux Enterprise Server 15 Ensure the working directory is /tmp for Linux and C:/ for Windows. Select the component for Trend Vision One Endpoint Security agent that corresponds to either Linux or Windows. Finish creating the recipe. Next steps Create the infrastructure configuration. Create an image pipeline After creating the infrastructure configuration, continue setting up the image builder and creating an Amazon Elastic Compute Cloud (EC2) instance by following these steps: Procedure In the EC2 Image Builder, go to Image pipelines. Create a new pipeline. Name the pipeline. Make the build schedule manual. Select the recipe and infrastructure configuration. Finish creating the pipeline. Next steps Launch an EC2 from Amazon Machine Image (AMI). Create the infrastructure configuration After creating a recipe, continue setting up the image builder and creating an Amazon Elastic Compute Cloud (EC2) instance by following these steps: Procedure In EC2 Image Builder, go to Infrastructure configurations. Create a new configuration. Select the identity access management (IAM) role. Ensure the instance type is c3.large or t3.large. Finish creating the configuration. Next steps Create an image pipeline. Launch an Elastic Compute Cloud (EC2) from Amazon Machine Image (AMI) After creating an image pipeline, continue setting up the image builder and creating an Amazon Elastic Compute Cloud (EC2) instance by following these steps: Procedure Run the pipeline. When the pipeline is complete, launch an EC2 from the resulting AMI. Ensure the instance type is c3.large for Linux or t3.large for Windows. Under Advanced details, select the identity access management (IAM) role. Launch the instance. Next steps Connect an EC2 instance to Trend Vision One. Connect an Amazon Elastic Compute Cloud (EC2) instance to Trend Vision One After launching an EC2 from an AMI, continue setting up the image builder and creating an Amazon Elastic Compute Cloud (EC2) instance by following these steps: Procedure Go to the instance created using the Amazon Machine Image (AMI). Connect to the EC2. Go to /tmp on Linux or C:\tmp on Windows. Depending on your operating system, run the following commands: On Linux, as the root user: sh installVisionOneEndpoint.sh On Windows: Invoke-WebRequest -Uri “https://awscli.amazonaws.com/AWSCLIV2.msi” -OutFile “$env:TEMP\AWSCLIV2.msi” Start-Process msiexec.exe -Wait -ArgumentList ‘/i’, “$env:TEMP\AWSCLIV2.msi”, ‘/qn’ .\installVisionOneEndpoint.ps1 The EC2 connects to Trend Vision One and appears under Endpoint Security → Endpoint Inventory. © 2025 Trend Micro Incorporated. All rights reserved.Search Knowledge Base