---
id: deploy-vns-cf-template
title: Deploy a Virtual Network Sensor from a CloudFormation template
sidebar_label: Deploy a Virtual Network Sensor from a CloudFormation template
description: Deploy a Virtual Network Sensor from a CloudFormation template
tags:
  - endpoint-security
  - trend-vision-one
---

 Deploy a Virtual Network Sensor from a CloudFormation template Use a CloudFormation template to deploy a Virtual Network Sensor to your cloud environment. Note The steps contained in these instructions are valid as of February 2025. Before you begin, make sure you have completed the following tasks: Choose or create a VPC for the Virtual Network Sensor instance. Choose or create the subnets for the Virtual Network Sensor data port and management port. Trend Micro recommends using different subnets for the data and management ports. For more information on how to set up a VPC and subnet, refer to the Amazon documentation. Create security groups for the data port and management port. Procedure In the Trend Vision One console, go to Network Security → Network Inventory → Virtual Network Sensor. Click Deploy Virtual Network Sensor. The Virtual Network Sensor Deployment panel appears. Select Amazon Web Services for the platform. Set the Admin password and confirm the password. The password must contain the following: 12 to 32 characters Both uppercase and lowercase characters At least one number (0-9) At least one special character: ~!`@#$%^&*()/_+=[]{}-\|<>',.?:;" or space Note This step is used to set the default admin password to access the Virtual Network Sensor command line interface after deployment. Select the Connection method. Direct connection: the Virtual Network Sensor connects to Trend Vision One directly. Make sure the Virtual Network Sensor is able to connect to the internet when using this configuration. Connect using a custom proxy: the Virtual Network Sensor connects to Trend Vision One through a third-party proxy. After choosing this method, configure the following fields: Proxy address: Specify the IP address of the proxy. Proxy port: Specify the connecting port of the proxy. Proxy server requires authentication: (Optional) Select if the proxy requires authentication credentials. User name: Specify the user name for the proxy credentials. Password: Specify the password for the proxy credentials. Connect using a Service Gateway as proxy: the Virtual Network Sensor connects to Trend Vision One through a Service Gateway. Select a Service Gateway to use for this method. Important The Virtual Network Sensor must be able to connect to a Service Gateway with the Forward Proxy Service configured and enabled. For more information, see Manage services in Service Gateway. Select CloudFormation template for the Deployment method. Click Download Token to download the token file. Note The token file contains important information for the Virtual Network Sensor including the configured admin password and information that allows the Virtual Network Sensor to connect and on-board with Network Inventory automatically. In a new tab in the same browser session, sign in to the AWS Management Console. Locate the S3 service and click the link to access the S3 dashboard. In the General purpose buckets tab, locate your S3 bucket and click the name. Click Upload to upload the token file to your AWS S3 bucket. Select the uploaded token and click Copy S3 URI. In the same browser session on the other tab with the Trend Vision One console, click Go to AWS Marketplace to launch the instance directly from the marketplace.The Trend Vision One™ XDR for Networks (BYOL) window opens in a new tab. Click View purchase options. Click Continue to Configuration. Select CloudFormation Template for the Fulfillment option. Select the Region. Click Continue to Launch. Select Launch CloudFormation from the drop-down menu. Click Launch. On the Create stack screen, click Next. On the Specify stack details screen, specify a Stack name, Instance type, and Disk Size (GB). Note The Virtual Network Sensor has been tested with the following recommended instance types: Throughput (Mbps) Recommended Instance Type 100 t3.large m5.large 500 t3.xlarge m5.xlarge 1000 t3.2xlarge 2000 m5.2xlarge 5000 m5.4xlarge 10000 m5.8xlarge Set the disk size (root volume size) according to your throughput: Throughput (Mbps) Recommended Volume Size (GB) 100 50 500 1000 2000 100 5000 150 10000 200 Select the Management port subnet ID and Management port security group. Select an option for Associate new public IP address for management port? depending on your needs. Select the Data port subnet ID and Data port security group. Paste the copied Token S3 URL. Important You must paste the S3 URI (not the URL) for the sensor to be configured correctly. Click Next. Configure the stack options for the deployment. Select all the checkboxes in the Capabilities and transforms section and click Next. Review all your configured settings and click Create. Once you create the stack, the Virtual Network Sensor begins installation. Installation may take a few minutes to complete. Once the appliance is ready, configure your network settings based on your security environment needs. Configure traffic mirror settings. Configure a network load balancer. © 2025 Trend Micro Incorporated. All rights reserved.Search Knowledge Base