---
slug: trend-vision-one-performance-tips-for-anti-malware
title: Performance tips for Anti-Malware
---
# Performance tips for Anti-Malware

:To improve system resources utilization on the agent, you can optimize these performance-related settings according to best practices.

See also:

- [Create Anti-Malware exceptions](create-anti-malware-exceptions.mdx)

- [Identify malware files by file hash digest](identify-malware-files-hash-digest.mdx)

## Minimize disk usage {#minimize-disk-usage}

Reserve an appropriate amount of disk space for storing identified malware files. The space that you reserve applies globally to all computers: physical machines and virtual machines. The setting can be overridden at the policy level and at the computer level.

Alerts are raised when there is not enough disk space to store an identified file.

### Procedure {#procedure}

1.  Open the policy or computer editor that you want to configure.

2.  Click **Anti-Malware → Advanced**.

3.  Under **Identified Files**, clear **Default**.

4.  Specify the disk space to use in the **Maximum disk space used to store identified files** box.

5.  Click **Save**.

## Optimize CPU usage {#optimize-cpu-usage}

- Exclude files from real-time scans if they are normally safe but have high I/O, such as databases, Microsoft Exchange quarantines, and network shares (on Windows, you can use [procmon](https://docs.microsoft.com/en-us/sysinternals/downloads/procmon) to find files with high I/O). See [Configure malware scan exclusions](configure-malware-scan-exclusions.mdx).

- Do not scan network directories. See [Scan a network directory (real-time scan only)](scan-network-directory.mdx).

- Do not use Smart Scan if the computer doesn't have reliable network connectivity to the Trend Micro Smart Protection Network or your Smart Protection Server. See [Smart Protection in Server & Workload Protection](smart-protection.mdx).

- Reduce the CPU impact of malware scans by setting CPU Usage to **Medium** (Recommended; pauses between scanning files) or **Low** (pauses between scanning files for a longer interval than the medium setting).

  Modification of CPU usage is only available for Manual and Scheduled scans.

  1.  Open the properties of the malware scan configuration.

  2.  On the **Advanced** tab, select the **CPU Usage** during which scans run.

  3.  Click **OK**.

- Create a scheduled task to run scans at a time when CPU resources are more readily available. See [Schedule Server & Workload Protection to perform tasks](schedule-perform-tasks.mdx).

- Reduce or keep small default values for the maximum file size to scan, maximum levels of compression from which to extract files, maximum size of individual extracted files, maximum number of files to extract, and OLE Layers to scan. See [Scan for specific types of malware](configure-malware-scans.mdx).

  :::danger[Warning]

  Most malware is small, and nested compression indicates malware. But if you do not scan large files, there is a risk that Anti-Malware does not detect some malware. You can mitigate this risk with other functionality, such as Integrity Monitoring. See [Set up Integrity Monitoring.](set-up-integrity-monitoring.mdx)
  :::

## Enable multi-threaded processing {#enable-multi-threaded-processing}

You can enable multi-threaded processing for manual and scheduled scans. Real-time scans use multi-threaded processing by default. Multi-threaded processing is effective only on systems that support this capability. To apply the setting, after you have enabled it, restart the computer.

Do not enable multi-threaded processing if resources are limited (for example, CPU-bound tasks) or if resources have to be held by only one operator at a time (for example, IO-bound tasks).

:::note

Enabling multi-threaded processing may impact CPU usage:

- Multi-threaded processing may reduce the number of CPU cores available to the computer's other processes.

- On Linux, when **Resource Allocation for Malware Scans** is enabled, the CPU usage setting is ignored even if set to **Medium** or **Low**.
:::

To enable multi-threaded processing:

1.  Click **Policies**.

2.  Double-click to open the policy where you want to enable multi-threaded processing.

3.  Click **Anti-Malware → Advanced**.

4.  In the **Resource Allocation for Malware Scans** section, select **Yes** from the dropdown menu and click **Save**.

    :::note

    On Deep Security Agent for Linux platforms, this setting takes effect without requiring a restart.
    :::

5.  For the setting to take effect on non-Linux platforms, restart the solution platform service by doing either of the following steps:

    - In the `services.msc` window, select the Trend Micro Solution Platform service and click **Restart**.

    - In the command prompt, enter the following commands:

      ```bash
      sc stop amsp
      sc start amsp
      ```

    - Restart the computers on which you enabled multi-threaded processing for the setting to take effect.

## Optimize RAM usage {#optimize-ram-usage}

Reduce or keep small default values for the maximum file size to scan, maximum levels of compression from which to extract files, maximum size of individual extracted files, maximum number of files to extract, and OLE Layers to scan. See [Scan for specific types of malware](configure-malware-scans.mdx).

:::danger[Warning]

Most malware is small, and nested compression indicates malware. But if you do not scan large files, there is a risk that Anti-Malware does not detect some malware. You can mitigate this risk with other features such as integrity monitoring. See [Set up Integrity Monitoring.](set-up-integrity-monitoring.mdx)
:::
:::::
