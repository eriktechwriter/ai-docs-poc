"use strict";(self.webpackChunktrend_vision_one_docs=self.webpackChunktrend_vision_one_docs||[]).push([[6413],{28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>c});var s=i(96540);const r={},t=s.createContext(r);function a(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(t.Provider,{value:n},e.children)}},37315:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"sg-virtual-app-nutanix-ahv","title":"Deploying a Service Gateway virtual appliance with Nutanix AHV","description":"Instructions on how to use the Command Line Interface (CLI) to deploy a Service Gateway virtual appliance with Nutanix AHV cluster.","source":"@site/docs/sg-virtual-app-nutanix-ahv.md","sourceDirName":".","slug":"/trend-vision-one-sg-virtual-app-nutanix-ahv","permalink":"/ai-docs-poc/trend-vision-one-sg-virtual-app-nutanix-ahv","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"slug":"trend-vision-one-sg-virtual-app-nutanix-ahv","title":"Deploying a Service Gateway virtual appliance with Nutanix AHV"}}');var r=i(74848),t=i(28453);const a={slug:"trend-vision-one-sg-virtual-app-nutanix-ahv",title:"Deploying a Service Gateway virtual appliance with Nutanix AHV"},c=void 0,o={},l=[{value:"Procedure",id:"procedure",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",figure:"figure",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Instructions on how to use the Command Line Interface (CLI) to deploy a Service Gateway virtual appliance with Nutanix AHV cluster."}),"\n",(0,r.jsxs)(n.p,{children:["Verify that system requirements are met. For more information, see ",(0,r.jsx)(n.a,{href:"/ai-docs-poc/trend-vision-one-sg-sys-requirements",children:"Service Gateway appliance system requirements"}),"."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsx)(n.p,{children:"The following Nutanix AHV instructions and screen captures were valid as of September 20, 2024. For further help, check your Nutanix AHV documentation."})}),"\n",(0,r.jsx)(n.h3,{id:"procedure",children:"Procedure"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Go to ",(0,r.jsx)(n.strong,{children:"Workflow and Automation \u2192 Service Gateway Management"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.strong,{children:"Download Virtual Appliance"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:"Service Gateway Virtual Appliance"})," panel appears."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Select ",(0,r.jsx)(n.strong,{children:"Nutanix AHV (QCOW2)"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.strong,{children:"Download Disk Image"})," to download a QCOW2 file."]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:"Copy the registration token for later steps. The registration token will expire within 24 hours if not used."})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Upload the disk image to the Nutanix AHV cluster."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["In your Nutanix Prism Web console, choose ",(0,r.jsx)(n.strong,{children:"Home \u2192 Settings"})," in the upper left corner."]}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_nutanix_5a_settings=38bb6a10-0ecd-444c-a732-49cfe1f46abb.webp"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.strong,{children:"Image Configuration"})," and click ",(0,r.jsx)(n.strong,{children:"Upload Image"}),"."]}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_nutanix_5b_uploadimage=73cea27e-e132-487c-a02b-e8f81e6a17c0.webp"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Specify the name of the image."}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_nutanix_5c_imagename=a9316694-4af2-4aa1-91c6-d8bbd62e2afe.webp"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Select ",(0,r.jsx)(n.strong,{children:"DISK"})," from the ",(0,r.jsx)(n.strong,{children:"Image Type"})," drop-down list."]}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_nutanix_5d_imagetype=7e947578-255f-4d32-a5e8-deb8a55fdfa6.webp"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Select the container where you want to store your image."}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_nutanix_5e_storagecontainer=8d181d85-a497-4774-b569-d94ec731addf.webp"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Select ",(0,r.jsx)(n.strong,{children:"Upload a file"}),". Locate the downloaded QCOW2 file from your directory and click ",(0,r.jsx)(n.strong,{children:"Open"}),"."]}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_nutanix_5f_open=453ded39-037c-48e7-9729-307a59a07151.webp"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.strong,{children:"Save"}),". Wait until the image is completely uploaded."]}),"\n",(0,r.jsx)(n.p,{children:"It takes about 5 to 7 minutes to complete uploading the disk image."}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_nutanix_5g_save=6b2c9aba-6bbe-46a9-bbdd-c0ecda18476a.webp"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Create a virtual machine."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Navigate to the ",(0,r.jsx)(n.strong,{children:"VM"})," section from ",(0,r.jsx)(n.strong,{children:"Settings"})," and click ",(0,r.jsx)(n.strong,{children:"Create VM"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["In the ",(0,r.jsx)(n.strong,{children:"General Configuration"})," area, specify the name and description of your virtual machine."]}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_nutanix_6b_createvm=21572a79-9070-410e-b39c-a12456e74d31.webp"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["In the ",(0,r.jsx)(n.strong,{children:"Compute Details"})," area, specify the desired configurations."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"vCPU"}),": 1"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Number Of Cores Per vCPU"}),": 8"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Memory"}),": 12 GB"]}),"\n"]}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_nutanix_6c_computedetails=1b1728b0-b206-4713-a2d9-d86e9d61e63f.webp"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["In the ",(0,r.jsx)(n.strong,{children:"Boot Configuration"})," area, keep the default ",(0,r.jsx)(n.strong,{children:"Legacy BIOS"})," for ",(0,r.jsx)(n.strong,{children:"Boot Configuration"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["In the ",(0,r.jsx)(n.strong,{children:"Disks"})," area, click ",(0,r.jsx)(n.strong,{children:"Add New Disk"}),". For ",(0,r.jsx)(n.strong,{children:"Operation"}),", select ",(0,r.jsx)(n.strong,{children:"Clone from Image Service"}),". Select ",(0,r.jsx)(n.strong,{children:"SCSI"})," for ",(0,r.jsx)(n.strong,{children:"Bus Type"}),", and select the uploaded QCOW2 image for ",(0,r.jsx)(n.strong,{children:"Image"}),". Click ",(0,r.jsx)(n.strong,{children:"Add"})," to save the settings."]}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_nutanix_6e1_addnewdisk=92005d38-ff93-4700-a2eb-e8fb22ca760c.webp"}),"\n"]}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_nutanix_6e2_adddisk=8045ff68-aae3-4415-8451-38b400d3956d.webp"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["In the ",(0,r.jsx)(n.strong,{children:"Network Adapters (NIC)"})," area, click ",(0,r.jsx)(n.strong,{children:"Add New NIC"}),". Select the appropriate network subnet and click ",(0,r.jsx)(n.strong,{children:"Add"})," to save the settings."]}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_nutanix_6f1_addnewNIC=d4062e5d-8827-460e-a945-831c18a32ec0.webp"}),"\n"]}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_nutanix_6f2_subnetname=c6515930-22f6-43b4-ae29-95e197e7c704.webp"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Review the settings and click ",(0,r.jsx)(n.strong,{children:"Save"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Right-click your virtual machine and click ",(0,r.jsx)(n.strong,{children:"Power on"})," to start the virtual machine."]}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_nutanix_6h_powneron=1740ea84-c26d-4788-97b2-a2ee9a83162c.webp"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"On the Service Gateway virtual appliance, log on to the Command Line Interface (CLI) with the default credentials."}),"\n",(0,r.jsx)(n.p,{children:"User name: admin"}),"\n",(0,r.jsx)(n.p,{children:"Password: V1SG@2021"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Change your password."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Type ",(0,r.jsx)(n.code,{children:"enable"})," and press the ",(0,r.jsx)(n.code,{children:"ENTER"})," key to enable administrative commands. Provide your password when asked."]}),"\n",(0,r.jsx)(n.p,{children:"The command prompt changes from > to #."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Configure the required network settings using the following CLISH commands."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"Configure network primary ipv4.static <interface> <ip_cidr> <gateway> <dns1> [dns2] [cni]"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"Configure static IPv4 network settings for the primary network interface"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"<interface>: Name of the network interface (for example, eth0)"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"<ip_cidr>: IPv4 address of the network interface in CIDR notation"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"<gateway>: Gateway router address"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"<dns1>: Primary DNS server address"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"[dns2]: Secondary DNS server address"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"[cni]: Internal network address pool (IP address ending in .0.0)"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"To register the Service Gateway virtual appliance to Trend Vision One, use an SSH tool, such as the latest version of PuTTY, and using an account with administrator privileges, type the following command."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"register <registration_token>"})}),"\n",(0,r.jsx)(n.p,{children:"You can obtain the token from the same screen you download the virtual appliance on Trend Vision One (step 3)."}),"\n",(0,r.jsx)(n.admonition,{title:"Important",type:"warning",children:(0,r.jsx)(n.p,{children:"The virtual appliance only supports UTC time. Ensure your hypervisor is correctly configured."})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"If your environment uses a local Network Time Protocol (NTP) server, make sure the NTP server synchronizes with the local time for successful registration."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Trend Micro recommends using an SSH client to easily copy and paste the registration token."}),"\n"]}),"\n"]})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Use the CLI to configure other settings, if required."}),"\n",(0,r.jsxs)(n.p,{children:["For more information on available commands, see ",(0,r.jsx)(n.a,{href:"service-gateway-cli-commands.md",children:"Service Gateway CLI commands"}),"."]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);