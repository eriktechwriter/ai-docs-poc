"use strict";(self.webpackChunktrend_vision_one_docs=self.webpackChunktrend_vision_one_docs||[]).push([[268],{28453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>l});var s=i(96540);const r={},t=s.createContext(r);function c(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(t.Provider,{value:n},e.children)}},71306:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"deploy-virtual-appliance-ms-hyper-v","title":"Deploying a Service Gateway virtual appliance with Microsoft Hyper-V","description":"Instructions on how to use the Command Line Interface (CLI) to deploy a Service Gateway virtual appliance with Microsoft Hyper-V.","source":"@site/docs/deploy-virtual-appliance-ms-hyper-v.md","sourceDirName":".","slug":"/trend-vision-one-deploy-virtual-appliance-ms-hyper-v","permalink":"/ai-docs-poc/trend-vision-one-deploy-virtual-appliance-ms-hyper-v","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"slug":"trend-vision-one-deploy-virtual-appliance-ms-hyper-v","title":"Deploying a Service Gateway virtual appliance with Microsoft Hyper-V"}}');var r=i(74848),t=i(28453);const c={slug:"trend-vision-one-deploy-virtual-appliance-ms-hyper-v",title:"Deploying a Service Gateway virtual appliance with Microsoft Hyper-V"},l=void 0,o={},a=[{value:"Procedure",id:"procedure",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",figure:"figure",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"Instructions on how to use the Command Line Interface (CLI) to deploy a Service Gateway virtual appliance with Microsoft Hyper-V."}),"\n",(0,r.jsxs)(n.p,{children:["Verify that system requirements are met. For more information, see ",(0,r.jsx)(n.a,{href:"/ai-docs-poc/trend-vision-one-sg-sys-requirements",children:"Service Gateway appliance system requirements"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"procedure",children:"Procedure"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Go to ",(0,r.jsx)(n.strong,{children:"Workflow and Automation \u2192 Service Gateway Management"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.strong,{children:"Download Virtual Appliance"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:"Service Gateway Virtual Appliance"})," panel appears."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Select ",(0,r.jsx)(n.strong,{children:"Microsoft Hyper-V (VHD)"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Select a virtual appliance specification and click ",(0,r.jsx)(n.strong,{children:"Download Disk Image"})," to download an VHD file in a compressed archive."]}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:"Copy the registration token for later steps. The registration token will expire within 24 hours if not used."})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Extract the VHD file using a ZIP extractor."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Create a virtual machine."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["On Hyper-V Manager, right-click on your machine and ",(0,r.jsx)(n.strong,{children:"New \u2192 Virtual Machine"}),"."]}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_hyperv_new=20211115170204.webp"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_hyperv_1_beforeyoubegin=20220525104621.webp"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Specify a name for the Service Gateway virtual appliance and click ",(0,r.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_hyperv_2_name=20211022152937=.webp"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Specify ",(0,r.jsx)(n.strong,{children:"Generation 1"})," and click ",(0,r.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_hyperv_3_generation=20211022153037=.webp"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Specify the amount of memory needed for the VM based on the system requirements, and then click ",(0,r.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_hyperv_4_memory=20211022153058=.webp"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Specify the network connection that the VM will use, and then click ",(0,r.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_hyperv_5_networking=20211022153406=.webp"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.strong,{children:"Use an existing virtual hard disk"}),", and then click ",(0,r.jsx)(n.strong,{children:"Browse"}),"."]}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_hyperv_6_hdd=20211022153447=.webp"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Navigate to the location where you extracted the VHD file, select the file, and then click ",(0,r.jsx)(n.strong,{children:"Open"}),"."]}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_hyperv_7_hddfile=20211022153513=.webp"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_hyperv_8_hddnext=20211022153608=.webp"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Review the settings, and then click ",(0,r.jsx)(n.strong,{children:"Finish"}),"."]}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_hyperv_9_finish=20211022155239=.webp"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["From the ",(0,r.jsx)(n.strong,{children:"Hyper-V Manager"})," ",(0,r.jsx)(n.strong,{children:"Virtual Machines"})," list, right-click on the Service Gateway virtual appliance and click ",(0,r.jsx)(n.strong,{children:"Settings"}),"."]}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_hyperv_11_offstatesettings=20211022161940=.webp"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.strong,{children:"Processor"}),", specify the number of virtual processors, and then click ",(0,r.jsx)(n.strong,{children:"OK"}),"."]}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_hyperv_12_cpus=20211022162017=.webp"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["From the ",(0,r.jsx)(n.strong,{children:"Hyper-V Manager"})," ",(0,r.jsx)(n.strong,{children:"Virtual Machines"})," list, right-click on the Service Gateway virtual appliance and click ",(0,r.jsx)(n.strong,{children:"Connect"}),"."]}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_hyperv_13_connect=20211022162114=.webp"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.strong,{children:"Start"})," to start the virtual machine."]}),"\n",(0,r.jsx)(n.p,{children:"Service installation during the first launch of the appliance takes approximately 10 minutes."}),"\n",(0,r.jsxs)(n.figure,{children:["\n",(0,r.jsx)(n.img,{src:"./images/sg_hyperv_14_start=20211022162141=.webp"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"On the Service Gateway virtual appliance, log on to the Command Line Interface (CLI) with the default credentials."}),"\n",(0,r.jsx)(n.p,{children:"User name: admin"}),"\n",(0,r.jsx)(n.p,{children:"Password: V1SG@2021"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Change your password."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Type ",(0,r.jsx)(n.code,{children:"enable"})," and press the ",(0,r.jsx)(n.code,{children:"ENTER"})," key to enable administrative commands. Provide your password when asked."]}),"\n",(0,r.jsx)(n.p,{children:"The command prompt changes from > to #."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Configure the required network settings using the following CLISH commands."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"Configure network primary ipv4.static <interface> <ip_cidr> <gateway> <dns1> [dns2] [cni] "})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"Configure static IPv4 network settings for the primary network interface"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"<interface>: Name of the network interface (for example, eth0)"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"<ip_cidr>: IPv4 address of the network interface in CIDR notation"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"<gateway>: Gateway router address"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"<dns1>: Primary DNS server address"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"[dns2]: Secondary DNS server address"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"[cni]: Internal network address pool (IP address ending in .0.0)"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"To register the Service Gateway virtual appliance to Trend Vision One, use an SSH tool, such as the latest version of PuTTY, and using an account with administrator privileges, type the following command."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"register <registration_token>"})}),"\n",(0,r.jsx)(n.p,{children:"You can obtain the token from the same screen you download the virtual appliance on Trend Vision One (step 3)."}),"\n",(0,r.jsx)(n.admonition,{title:"Important",type:"warning",children:(0,r.jsx)(n.p,{children:"The virtual appliance only supports UTC time. Ensure your hypervisor is correctly configured."})}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"If your environment uses a local Network Time Protocol (NTP) server, make sure the NTP server synchronizes with the local time for successful registration."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Trend Micro recommends using an SSH client to easily copy and paste the registration token."}),"\n"]}),"\n"]})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Use the CLI to configure other settings, if required."}),"\n",(0,r.jsxs)(n.p,{children:["For more information on available commands, see ",(0,r.jsx)(n.a,{href:"service-gateway-cli-commands.md",children:"Service Gateway CLI commands"}),"."]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);