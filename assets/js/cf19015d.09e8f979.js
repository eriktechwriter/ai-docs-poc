"use strict";(self.webpackChunktrend_vision_one_docs=self.webpackChunktrend_vision_one_docs||[]).push([[4012],{28453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>a});var o=i(96540);const t={},r=o.createContext(t);function s(e){const n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),o.createElement(r.Provider,{value:n},e.children)}},82697:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>s,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"runtime-proxy-priority-behavior","title":"Runtime Proxy priority behavior","description":"Review how the Runtime Proxy policies and endpoint agents utilize priority to determine how to connect to Trend Vision One.","source":"@site/docs/runtime-proxy-priority-behavior.md","sourceDirName":".","slug":"/trend-vision-one-runtime-proxy-priority-behavior","permalink":"/ai-docs-poc/trend-vision-one-runtime-proxy-priority-behavior","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"slug":"trend-vision-one-runtime-proxy-priority-behavior","title":"Runtime Proxy priority behavior"}}');var t=i(74848),r=i(28453);const s={slug:"trend-vision-one-runtime-proxy-priority-behavior",title:"Runtime Proxy priority behavior"},a=void 0,c={},l=[];function p(e){const n={admonition:"admonition",code:"code",figcaption:"figcaption",figure:"figure",img:"img",li:"li",ol:"ol",p:"p",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Review how the Runtime Proxy policies and endpoint agents utilize priority to determine how to connect to Trend Vision One."}),"\n",(0,t.jsx)(n.p,{children:"How an endpoint agent connects to Trend Vision One depends on a combination of priority and availability. Endpoints connect to whichever proxy is both available and has a higher priority."}),"\n",(0,t.jsx)(n.p,{children:"Availability is determined through probing. Agents probe for a connection every 10 minutes. Once a successful connection to a proxy or Service Gateway is established, the agent maintains that connection for the next 10 minutes, even if the proxy or Service Gateway becomes unavailable during those 10 minutes."}),"\n",(0,t.jsx)(n.p,{children:"A proxy or Service Gateways is considered unavailable if the agent connection times out or fails. The endpoint agent has a timeout setting of one (1) minute for each step of the HTTPS request: DNS look-up, TCP connection, HTTPS response. If a connection fails, the agent does not wait for the timeout before attempting to find another available proxy or Service Gateway. Connection failures are caused by events such as being unable to resolve the FQDN, any firewall blocks the request, or the proxy or Service Gateway is down."}),"\n",(0,t.jsx)(n.p,{children:"Endpoint agents use the following priority when determining which proxy to connect to if more than one is available:"}),"\n",(0,t.jsxs)(n.figure,{children:["\n",(0,t.jsx)(n.img,{src:"./images/ProxyPriority-0709=GUID-fb08fe91-8b5a-4cda-b3ff-00069462975e.webp"}),"\n",(0,t.jsx)(n.figcaption,{children:"Proxy Priority Behavior"}),"\n"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Assigned proxy policy, highest priority criteria match"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Service Gateway"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Custom proxy (third party proxy)"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"System proxy (proxy set by the agent OS)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Assigned proxy policy, next highest priority criteria match"}),"\n",(0,t.jsx)(n.p,{children:"If an endpoint matches the criteria of more than one priority within a proxy policy, it applies the highest priority with a proxy available to connect."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Command Line input proxy"}),"\n",(0,t.jsx)(n.p,{children:"You can specify a proxy using the command line before or after installation by running the agent installer with the following command:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"EndpointBasecamp.exe/proxy_server_port <address:port>"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"<address:port>"})," is the proxy server IP address or FQDN and the connection port."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Direct connection"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Last known usable"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"Endpoint groups can only be assigned to one proxy policy at a time. If an endpoint agent cannot connect using the assigned proxy policy, it does not use the Base Policy."})}),"\n",(0,t.jsx)(n.p,{children:'Server & Workload Protection adds additional steps to the proxy priority. If an endpoint agent is not able to connect using a proxy policy or if the endpoint agent resolves to "direct connection" using the above priority list, it instead uses the following priority behavior:'}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Server & Workload Protection agent proxy settings"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Server & Workload Protection server proxy settings"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Direct connection"}),"\n"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}}}]);