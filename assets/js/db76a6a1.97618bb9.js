"use strict";(self.webpackChunktrend_vision_one_docs=self.webpackChunktrend_vision_one_docs||[]).push([[6649],{28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>l});var s=t(96540);const i={},r=s.createContext(i);function o(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:n},e.children)}},31561:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"update-agent-virtual-desktops","title":"Updating the agent on virtual desktops","description":"Update the agent program on virtual desktops created using a golden image.","source":"@site/docs/update-agent-virtual-desktops.md","sourceDirName":".","slug":"/trend-vision-one-update-agent-virtual-desktops","permalink":"/ai-docs-poc/trend-vision-one-update-agent-virtual-desktops","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"slug":"trend-vision-one-update-agent-virtual-desktops","title":"Updating the agent on virtual desktops"}}');var i=t(74848),r=t(28453);const o={slug:"trend-vision-one-update-agent-virtual-desktops",title:"Updating the agent on virtual desktops"},l=void 0,d={},a=[{value:"Procedure",id:"procedure",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",col:"col",colgroup:"colgroup",figure:"figure",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Update the agent program on virtual desktops created using a golden image."}),"\n",(0,i.jsx)(n.p,{children:"Use the following steps to install the latest version of the agent program on your source desktop and export to an updated golden image."}),"\n",(0,i.jsxs)(n.admonition,{title:"Important",type:"warning",children:[(0,i.jsxs)(n.p,{children:["To update your golden image, you must have a snapshot of the source desktop created before running the Image Setup Tool and exporting the golden image. If you do not have a snapshot available, follow the steps in ",(0,i.jsx)(n.a,{href:"/ai-docs-poc/trend-vision-one-create-golden-agent-image",children:"Creating a golden image with the agent software"})," to create a new snapshot and golden image."]}),(0,i.jsx)(n.p,{children:"Trend Micro only maintains updates for six months. If it has been more than six months since you created or updated the golden image, you might have to create a new image using the most recent agent installer package."})]}),"\n",(0,i.jsx)(n.h3,{id:"procedure",children:"Procedure"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Load, power on, or revert to the source desktop snapshot."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Make sure the source desktop is able to connect to the internet and restart the source desktop virtual machine."}),"\n",(0,i.jsx)(n.p,{children:"The agent program automatically checks for updates on start up."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Check the program logs to verify the update completed successfully."}),"\n",(0,i.jsx)(n.p,{children:"The logs are located in the Endpoint Basecamp installation folder."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"After the update completes successfully, create a new snapshot."}),"\n",(0,i.jsx)(n.admonition,{title:"Important",type:"warning",children:(0,i.jsx)(n.p,{children:"The Image Setup Tool disables updates for the endpoint agent. To maintain the ability to update the agent program in the future, you must create a snapshot of the source desktop before installing and running the Image Setup Tool."})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Prepare and export the golden image as normal."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"For Linux and macOS images, export the source desktop as a golden image template. Your template is now ready to deploy to your virtual machines. Do not continue the following steps."}),"\n",(0,i.jsx)(n.p,{children:"When signing into a desktop created using the golden image template, the newly-provisioned endpoint appears in the Endpoint Inventory list."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"For Windows images, use the following steps to run the Image Setup Tool and then export the golden image template."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{title:"Important",type:"warning",children:(0,i.jsx)(n.p,{children:"The Image Setup Tool does not support Linux or macOS images. Continue only for Windows images."})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["In the Trend Vision One console, go to ",(0,i.jsx)(n.strong,{children:"Endpoint Security Operations \u2192 Endpoint Inventory"})," and click ",(0,i.jsx)(n.strong,{children:"Agent Installer"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Click the ",(0,i.jsx)(n.strong,{children:"Download Image Setup Tool"})," icon (",(0,i.jsx)(n.img,{src:t(66641).A+"",width:"18",height:"18"}),") for your agent type."]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.strong,{children:"Virtual Desktop Image Setup Tool"})," screen appears."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Click ",(0,i.jsx)(n.strong,{children:"Download"})," to download the Image Setup Tool."]}),"\n",(0,i.jsx)(n.admonition,{title:"Important",type:"warning",children:(0,i.jsx)(n.p,{children:"The downloaded Image Setup Tool package is specific to your organization."})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Copy the ",(0,i.jsx)(n.strong,{children:"Admin token"}),"."]}),"\n",(0,i.jsxs)(n.figure,{children:["\n",(0,i.jsx)(n.img,{src:"./images/vdiImageSetupToolAdminToken=20230629144444.webp"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Extract the contents of the ",(0,i.jsx)(n.code,{children:"ImageSetupTool.zip"})," package onto the source desktop."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["For customers installing the Standard Endpoint Protection agent, run the TCacheGen tool found in ",(0,i.jsx)(n.code,{children:"<ImageSetupTool folder>\\TCacheGen"})," before running the Image Setup Tool."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Use the graphics user interface:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Double-click the executable (",(0,i.jsx)(n.strong,{children:"TCacheGen.exe"})," or ",(0,i.jsx)(n.strong,{children:"TCacheGen_x64.exe"}),")."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Select ",(0,i.jsx)(n.strong,{children:"Generate the pre-scan template and remove the GUID"})," or ",(0,i.jsx)(n.strong,{children:"Remove the GUID from the pre-scan template"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Click ",(0,i.jsx)(n.strong,{children:"Next"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Use the command line:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Unload the Agent."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Put a copy of the following files under <Agent installation folder>:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["32-bit platform: ",(0,i.jsx)(n.strong,{children:"TCacheGen.exe"})," and ",(0,i.jsx)(n.strong,{children:"TCacheGenCli.exe"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["64-bit platform: ",(0,i.jsx)(n.strong,{children:"TCacheGen_x64.exe"})," and ",(0,i.jsx)(n.strong,{children:"TCacheGenCli_x64.exe"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Start the Agent again from the Start Menu."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Run one of the following commands as an administrator:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"To scan and remove the GUID:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"TCacheGenCli Generate_Template"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"TcacheGenCli_x64 Generate_Template"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"To only remove the GUID:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"TCacheGenCli Remove_GUID"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"TcacheGenCli_x64 Remove_GUID"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Provide the agent unload password."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"The TCacheGen executable is automatically deleted after generating the template to avoid unexpectedly triggering this tool again. Running the tool again re-creates the agent GUID and causes the agent to register as a new entry, breaking the association to current settings and logs."})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Run ",(0,i.jsx)(n.code,{children:"ImageSetupTool.exe"})," as an administrator on the source desktop to prepare the agent."]}),"\n",(0,i.jsx)(n.admonition,{title:"Important",type:"warning",children:(0,i.jsx)(n.p,{children:"You must specify if your cloned machine is physical/persistent or non-persistent."})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsxs)(n.colgroup,{children:["\n",(0,i.jsx)(n.col,{style:{width:"50%"}}),"\n",(0,i.jsx)(n.col,{style:{width:"25%"}}),"\n",(0,i.jsx)(n.col,{style:{width:"25%"}}),"\n"]}),(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.p,{children:"Command"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.p,{children:"Use Case"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.p,{children:"Supported Features"})})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"ImageSetupTool.exe --persistent "})})}),(0,i.jsx)(n.td,{children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.p,{children:"Persistent virtual desktops"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.p,{children:"Physical desktop clones"})}),"\n"]})}),(0,i.jsx)(n.td,{children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.p,{children:"Standard agent auto-removal"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.p,{children:"Vulnerability Assessment available"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.p,{children:"In-place upgrades"})}),"\n"]})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\xa0"}),(0,i.jsx)(n.td,{children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.p,{children:"Non-persistent virtual desktops"})}),"\n"]})}),(0,i.jsx)(n.td,{children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.p,{children:"Non-persistent agent auto-removal available from Endpoint Inventory"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.p,{children:"Vulnerability Assessment disabled"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.p,{children:"In-place upgrades disabled"})}),"\n"]})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\xa0"}),(0,i.jsx)(n.td,{children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.p,{children:"Do not require a login for the newly provisioned machine"})}),"\n"]})}),(0,i.jsx)(n.td,{children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.p,{children:"Citrix ICA virtual channels"})}),"\n"]})})]})]})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Paste the admin token copied from the Endpoint Inventory app when prompted."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Delete the Image Setup Tool from the source desktop once image setup completes."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Export your source desktop as a golden image template."}),"\n",(0,i.jsx)(n.p,{children:"When signing into a desktop created using the golden image template, the newly-provisioned endpoint appears in the Endpoint Inventory list."}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},66641:(e,n,t)=>{t.d(n,{A:()=>s});const s="data:image/webp;base64,UklGRpYAAABXRUJQVlA4IIoAAACQBACdASoSABIAPpE6mUeloyKhKA1QsBIJaQAAMWTGPSe01v6EPzmB5JRecAAA/vfHNkuWLNPuzJevInFBvTUsQrnM1Ux5MPfIaAO7eVEbKSEd+8R3SzA4cbpFKZZNf4cHY9u+87cWj3HR5/L2978X4HD+Jh9WLtW4svSp0ckQzHuHiFIhMyJAAAA="}}]);